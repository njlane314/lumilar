#include "AlphaGammaProcess.hh"
#include "G4Gamma.hh"
#include "G4ParticleChange.hh"
#include "G4DynamicParticle.hh"
#include "G4ParticleDefinition.hh"
#include "G4Track.hh"
#include "G4Step.hh"

AlphaGammaProcess::AlphaGammaProcess(const G4String& processName, G4ProcessType type)
: G4VDiscreteProcess(processName, type)
{}

AlphaGammaProcess::~AlphaGammaProcess()
{}

G4double AlphaGammaProcess::GetMeanFreePath(const G4Track& aTrack, G4double, G4ForceCondition* condition) {
    return 1*cm;
}

G4VParticleChange* AlphaGammaProcess::PostStepDoIt(const G4Track& aTrack, const G4Step& aStep) {
    aParticleChange.Initialize(aTrack);

    G4double gammaEnergy = 0.5*MeV; 
    G4ParticleDefinition* gamma = G4Gamma::GammaDefinition();
    aParticleChange.SetNumberOfSecondaries(1);

    
    G4ThreeVector gammaMomentumDirection = G4ThreeVector(0,1,0); 

    G4DynamicParticle* gammaParticle = new G4DynamicParticle(gamma, gammaMomentumDirection, gammaEnergy);
    aParticleChange.AddSecondary(gammaParticle);

    return &aParticleChange;
}
